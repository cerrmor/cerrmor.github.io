<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Degree Project Page - Garrison Jabs</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
		<noscript><link rel="stylesheet" href="../assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="../index.html" class="logo">Garrison Jabs</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="../index.html">Home</a></li>
							<li><a href="../interactiveProj.html">Live Demo's</a></li>
							<li><a href="../about.html">About</a></li>
							<li><a href="../contact.html">Contact me!</a></li>
							<li class="active"><a href="smartHomeHub.html">Smart Home Hub</a></li>
						</ul>
						<ul class="icons">
							<li><a href="mailto: garrison.jabs@gmail.com" class="icon fa-envelope"><span class="label">Email</span></a></li>
							<li><a href="https://www.linkedin.com/in/garrison-jabs-aa7b0943/" class="icon brands fa-linkedin"><span class="label">Linkedin</span></a></li>
							<li><a href="https://github.com/cerrmor" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<!-- <span class="date">April 25, 2017</span> -->
									<h1>CM2040 Databases Networks and the Web</h1>
                                    <h3>Smart Hub for Smart Devices</h3>
									<div class="box alt">
										<div class="row gtr-uniform gtr-uniform">
											<div class="col-2"><span class="image fit"></span></div>
											<div class="col-8"><span class="image fit"><img src="../images/smartHub/deviceStatus.jpg" alt="" /></span></div>
										</div>
										<div>
											<header><h3><br/>Continue to supporting documentation</h3></header>
											<ul class="actions special">
												<li><a href="#footer" class="button icon solid solo fa-arrow-down scrolly"></a></li>
											</ul>
										</div>
									</div>
								</header>

								<!-- <h2>Sorry! <br/><br/>This page is currently under construction <br/><br/></h2> -->
								<h2>The Brief</h2>
								
								<p>The Smart Home Hub served as the midterm project for CM2040 Databases Networks and the Web. It was also an 
								example of full stack development. The purpose of this project was to build a dynamic web application that 
								included:</p>
								
								<ul>
									<li>Database access.</li>
									<li>Procedurally generated webpages.</li>
									<li>Allowed user to visualise, edit, and interact with the data in the database.</li>
								</ul>

								<p>The form the project took, was a dashboard. This dashboard was used for networking and controlling a users 
								Internet of Things (IoT) devices, also known as smart home devices. The project focused on building the different 
								layers required such as, the database SCHEMA or design, the server, and the interactive dashboard. This put 
								the real-time control of IoT devices outside the scope of the project.</p>

								<h2>The experience</h2>
								
								<p>The general experience of this application is similar to browsing a webpage. Users access the application 
								through a internet browser of their choice, by entering the address of the host server. This takes the user to the
								applications homepage. From here the user can interact with the application, by clicking buttons to move between
								pages, and filling out form fields to update stored data.</p>
								<p> As the simulation focused on building the different layers in a full stack development, there is currently no 
								way to network a real IoT device to the system. Furthermore, there is also no user accounts which would be required 
								to personalise and protect an individuals smart devices.</p>

								<h2>Building Blocks</h2>

								<p>The challenges of producing a full stack development application was trully interesting and unique. This type of 
								development required considering engineering questions suchs as:</p>
								<ul>
									<li><strong>Front End</strong>
										<ul>
											<li>How to build responsive layouts?</li>
											<li>How to display the information?</li>
											<li>How to structure and keep the pages user friendly?</li>
										</ul>
									</li>
									<li><strong>Backend</strong>
										<ul>
											<li>How to handel API requests for storing/retrieving data?</li>
											<li>How to route pages?</li>
										</ul>
									</li>
									<li><strong>Database</strong>
										<ul>
											<li>How to structure the data efficiently?</li>
											<li>How to validate entered data and database security?</li>
											<li>How to handel multiple users?</li>
										</ul>
									</li>
								</ul>

								<p>Some basic requirements of the application such as, the language, database, framework, server environment, and 
								templating system used, were dictated by the project outline. This simplified the design process somewhat, by 
								eliminating thoes questions from the design process. That being said, many of the fundamental decision shuch as 
								database structure remained. From the project outline, Node.js and Express was used to build a simple web server, 
								while EJS templates was used to dynamically build the webpages with data from the MySQL relational database which was 
								used to manage the data. This resulted in the basic local server setup as seen here.</p>
<pre>
	<code>
		const express = require("express");
		const bodyParser = require("body-parser");
		const mysql = require('mysql');

		const app = express();
		const port = 8089;
		const db = mysql.createConnection({
			host: 'localhost',
			user: 'root',//your MySQL username
			password: '',//your MySQL password
			database: 'devices'
		});

		db.connect((err) => {
			if (err) {
				throw err;
			}
			console.log("Connected to database");
		});
		global.db = db;

		//handles http POST requests
		app.use(bodyParser.urlencoded({ extended: true }));
		//serves the css style sheet with page requests
		app.use(express.static(__dirname + '/public'));

		//includes all middleware code for handeling querys and page requests
		require("./routes/main")(app);


		app.set("views", __dirname + "/views");
		app.set("view engin", "ejs");
		app.engine("html", require("ejs").renderFile);
		app.listen(port, () => console.log(`Mid Term app listening on port ${port}!`));
	</code>
</pre>
								<p>Initial development work began by designing and building the basic layout and structure of the database to be used. By 
								considering the project requirements of the application such as, a dashboard for controlling smart home devices, and the 
								required pages to be developed:</p>
								
								<ul>
									<li>Home Page</li>
									<li>About Page</li>
									<li>Add Device Page</li>
									<li>Show Device Status Page</li>
									<li>Update Device Status Page</li>
									<li>Delete Device Page</li>
								</ul>
								
								<p>It was possiable to determine that a three table database would serve the imediate scope of the project. The resulting 
								structure and layout of the database developed, also known as a SCHEMA, was as follows:</p>

								<div class="box alt">
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-2"><span class="image fit"></span></div>
										<div class="col-8"><span class="image fit"><img src="../images/smartHub/devicesDatabaseSCHEMA.jpg" alt="" /></span></div>
									</div>
								</div>

								<p>After establishing the design of the required database and building a <strong>MySQL</strong> representation. Design of the 
								four main application pages began. These pages were:</p>
								
								<ol>
									<li>Home Page</li>
									<li>About Page</li>
									<li>Add Device Page</li>
									<li>Show Device Status Page</li>
								</ol>

								<p>The first two pages were required to include basic application information and navigation links to the other pages. As such, 
								these pages were fairly simple to design. However, the <strong>Add Device Page</strong> required considering how to access and 
								update information held within the database. By including a MySQL query <code>SELECT * FROM deviceList</code> in the middleware 
								code that executed on page load, it was possible to dynamically load the available options for adding a new device. This data was 
								then used to populate available options on the page by the EJS render. A second query 
								<code>SELECT * FROM deviceList INNER JOIN deviceSettings ON deviceList.id = deviceSettings.deviceID</code> was sent when the user
								selected a device to add. The returned data built a new page that displayed associated available device settings. However, this 
								was still only accessing data from the database to be displayed. In order to update the database, a POST request was required.
								The POST request sent the newly created	device record along with this SQL query which told the database to store the new information
								in the user devices table.</p>
								<pre><code>INSERT INTO userDevices (deviceID, settingID, power, open, locked, volume, temperature, channel) VALUES (?,?,?,?,?,?,?,?)</code></pre>
								
								<p>The same process was used to also dynamically build the <strong>Show Device Status Page</strong> as well as updating and deleting 
								devices.</p>
									
									<!-- <div class="box alt">
										<div class="row gtr-uniform gtr-uniform">
											<div class="col-2"><span class="image fit"></span></div>
											<div class="col-8"><span class="image fit"><img src="../images/CSFinalProject/fluid.jpg" alt="" /><p>hey</p></span></div>
										</div>
									</div> -->

								<h3>Tech Stack</h3>
								
								<dl>
									<dt>Node.js</dt>
									<dd>
										<p>Node.js is a cross-platform, open-source server environment designed to work on most common operating systems.</p>
									</dd>
									<dt>Express.js</dt>
									<dd>
										<p>Express.js is a minimalist JavaScript framework developed to facilitate building RESTful API's with Node.js.</p>
									</dd>
									<dt>EJS</dt>
									<dd>
										<p>EJS is a templating system. HTML pages developed with EJS syntax dynamicly fill data on demand without requireing
										special JavaScript functions or code.</p>
									</dd>
									<dt>MySQL</dt>
									<dd>
										<p>MySql is a relational database management system, using a structured query language.</p>
									</dd>
									<dt>HTML 5</dt>
									<dd>
										<p>HTML 5 is the standard markup language for documents designed to be displayed in a web browser.</p>
									</dd>
									<dt>CSS 3</dt>
									<dd>
										<p>Style sheet language for describing the presentation of documents written in HTML.</p>
									</dd>
									<dt>JavaScript</dt>
									<dd>
										<p>Core programming language used in desiging this application.</p>
									</dd>
								</dl>
								

								<h2>Navigating the experience</h2>

								<p>When a user first navigates to the application, they are greeted by the following home page.</p>
								
								<div class="box alt">
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-2"><span class="image fit"></span></div>
										<div class="col-8"><span class="image fit"><img src="../images/smartHub/home.jpg" alt="" /></span></div>
									</div>
								</div>

								<p>The home pages includes a basic greeting to welcome the user; it also includes a statement indicating that
								new users first action should be to click on the "add new device" button. If the user does this, the application 
								transitions to the add device page, populating the list of available devices from the database procedurally.</p>
								
								<div class="box alt">
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-3"><span class="image fit"></span></div>
										<div class="col-6"><span class="image fit"><img src="../images/smartHub/addNew.jpg" alt="" /></span></div>
									</div>
								</div>

								<p>This page allows the user to select a device to add from a list of twenty available devices. If the user clicks 
								ok without selecting a device, an alert is shown indicating that they have not yet selected anything. Once the user 
								has selected a device and pressed ok, a new page is shown, allowing the user to select the devices initial settings. 
								Upon submission, a message indicating the device has been successfully added is displayed and the user is redirected
								back to the initial add device page.</p>
								
								<div class="box alt">
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-1"><span class="image fit"></span></div>
										<div class="col-5"><span class="image fit"><img src="../images/smartHub/addNewSettings.jpg" alt="" /></span></div>
										<div class="col-5"><span class="image fit"><img src="../images/smartHub/deviceAdded.jpg" alt="" /></span></div>
										<!-- <div class="col-4"><span class="image fit"><img src="../images/CSFinalProject/viscosity.jpg" alt="" /></span></div> -->
									</div>
								</div>
								
								<p>From here if the user is done adding new devices, they have the ability to view the devices already added by 
								clicking The "device status button". This takes them to a page that lists all user devices and allows viewing/editing 
								current settings.</p>

								<div class="box alt">
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-1"><span class="image fit"></span></div>
										<div class="col-5"><span class="image fit"><img src="../images/smartHub/deviceStatus.jpg" alt="" /></span></div>
										<div class="col-5"><span class="image fit"><img src="../images/smartHub/selectedDeviceStatus.jpg" alt="" /></span></div>
										<!-- <div class="col-4"><span class="image fit"><img src="../images/CSFinalProject/viscosity.jpg" alt="" /></span></div> -->
									</div>
								</div>

								<p>If the user chooses to update a device, the following two pages will be shown upon compleating the action.</p>
								
								<div class="box alt">
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-1"><span class="image fit"></span></div>
										<div class="col-5"><span class="image fit"><img src="../images/smartHub/updateSettings.jpg" alt="" /></span></div>
										<div class="col-5"><span class="image fit"><img src="../images/smartHub/settingsUpdated.jpg" alt="" /></span></div>
										<!-- <div class="col-4"><span class="image fit"><img src="../images/CSFinalProject/viscosity.jpg" alt="" /></span></div> -->
									</div>
								</div>

								<p>If the user chooses to delete a device, the user is alerted to the fact that deleting cannot be undone.</p>
								
								<div class="box alt">
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-3"><span class="image fit"></span></div>
										<div class="col-6"><span class="image fit"><img src="../images/smartHub/deleteWarning.jpg" alt="" /></span></div>
									</div>
								</div>

								<p>After the user has selected ok, they are presented with the choice to cancel the action, or to continue. If they 
								select to cancel, a message indicating the device still exists is shown. Alternatively, if they choose to proceed, 
								a new message indicating the device was successfully removed is shown, and the user is redirected back to the device 
								status page.</p>

								<div class="box alt">
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-1"><span class="image fit"></span></div>
										<div class="col-5"><span class="image fit"><img src="../images/smartHub/deleteCancel.jpg" alt="" /></span></div>
										<div class="col-5"><span class="image fit"><img src="../images/smartHub/deviceDeleted.jpg" alt="" /></span></div>
										<!-- <div class="col-4"><span class="image fit"><img src="../images/CSFinalProject/viscosity.jpg" alt="" /></span></div> -->
									</div>
								</div>

								<p>The last page available to the user is the about page. This page displays the purpose of the application and introduces the
								designer.</p>
								
								<div class="box alt">
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-2"><span class="image fit"></span></div>
										<div class="col-8"><span class="image fit"><img src="../images/smartHub/about.jpg" alt="" /></span></div>
									</div>
								</div>
								
								<p>The actions used to allow the user to navigate the experience were: button clicks, drop down menus, and form fields. Some
								graphical feedback was also used to indicate the difference between a safe action, and a destructive action. For example, as 
								seen in the following image, buttons would higlight green if the action was safe and red if it was not.</p>

								<div class="box alt">
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-5"><span class="image fit"></span></div>
										<div class="col-3"><span class="image fit"><img src="../images/smartHub/buttonColors.jpg" alt="" /></span></div>
									</div>
								</div>

								<p>Navigation of the experience was kept fairly simple and stuck with actions that most users have previous experience using. 
								This allowed for the fastest learning curve with new users. </p>

								<!-- <div class="box alt">
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-3"><span class="image fit"></span></div>
										<div class="col-6"><span class="image fit"><img src="../images/CSFinalProject/teleportation.jpg" alt="" /></span></div>
									</div>
								</div> -->

								
								<h2>Conclusion</h2>

								<p>Building a full stack application created some interesting challenges that needed to be considered seporatly as well as a
								part of a complete design. That being said, by utilizing tools developed to stream line the process such as, the EJS templating 
								system for building dynamic webpages, and the express.js framework for building a server, made solving these challenges relitivly 
								easy. While this application served as great example of a simple full stack development, it did lack some serious considerations
								for an application of this nature suchs as:
								<ul>
									<li>Form field validation to protect against SQL injection attacks.</li>
									<li>Dealing with multiple user accounts and user authorization validation.</li>
								</ul>
								In the future these would be additional considerations follow up on. This project served as the midterm project submission for 
								CM2040 Databases Networks and the Web.</p>

							</section>



							<article class="post featured">
								<header class="major">
									<h1>Supporting Documentation</h1>
								</header>
								
								<div class="box alt">
									<h2>Project Features Demo Video</h2>
									<!-- <p>This is the demo video submitted with the origional project submission.</p> -->
									<div class="row gtr-uniform gtr-uniform">
										<div class="col-20">
											<span class="image main">
												<video width="100%" height="100%" controls><source src="../videos/smartHubDemo.mp4" type="video/mp4"/>
											</span>
										</div>
									</div>
								</div>
							</article>

							<section class="posts">
								<!-- <article>
									<header>
										<h2>Submitted Report</h2>
										<p>This document includes all research conducted, design/development documentation, and all final results.</p>
									</header>
									<ul class="actions special">
										<li><a href="../documents/FinalProject3070FinalReport1.pdf" class="button">Report PDF</a></li>
									</ul>
								</article> -->
								<article>
									<header>
										<h2 class="icon brands fa-github">Github</h2>
										<p>Direct link to the github repository containing the submitted code</p>
									</header>
									<ul class="actions special">
										<li><a href="https://github.com/cerrmor/CM2040_DatabasesNetworksWeb" class="button icon brands fa-github">Code Repo</a></li>
									</ul>
								</article>
							</section>

							<div class="box alt">
								<div class="row gtr-uniform gtr-uniform">
									<div class="col-1"></div>
									<div class="col-2">
										<header><h3>Back</h3></header>
										<ul class="actions">
											<li><a href="#" class="button icon solid solo fa-arrow-left">back</a></li>
										</ul>
									</div>
									<div class="col-2"><span class="image fit"></span></div>
									<div class="col-2">
										<header><h3>Top of Page</h3></header>
										<ul class="actions special">
											<li><a href="#header" class="button icon solid solo fa-arrow-up scrolly">top of page</a></li>
										</ul>
									</div>
									<div class="col-3"><span class="image fit"></span></div>
									<div class="col-2">
										<header><h3>Next</h3></header>
										<ul class="actions">
											<li><a href="#" class="button icon solid solo fa-arrow-right">next project</a></li>
										</ul>
									</div>
								</div>
							</div>
							

							
					</div>

				<!-- Footer -->
					<footer id="footer">
						<section>
							<p>Last updated: April 13 2023</p>
						</section>
					</footer>

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; Garrison Jabs</li><li>Original Template Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/jquery.scrollex.min.js"></script>
			<script src="../assets/js/jquery.scrolly.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<script src="../assets/js/main.js"></script>

	</body>
</html>